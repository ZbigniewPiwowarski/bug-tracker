pipeline {
    agent none

    stages {
        stage('Hello') {
            agent{
                docker {
                    image 'golang:1.21-alpine'  // lekki, szybki obraz do Go
                    args '-u root:root'         // uruchom jako root, aby uniknąć problemów z uprawnieniami
                    reuseNode true
                }
     
            }
            steps {
                dir ('bugtracker-backend')
                    sh 'go test -v ./...'
            }
        }
    }
}
